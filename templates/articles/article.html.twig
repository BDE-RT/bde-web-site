{% extends 'base.html.twig' %}

{% block title %}{{ article.titre }}{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" type="text/css" href="{{ asset('css/comments.css') }}">
{% endblock %}

{% block body %}
    <div class="container">
    {#    <h1>{{ user }}</h1>#}
    <div class="row justify-content-md-center">
        <div class="col col-xl-11">
            <div class="card mb-3">
                <h3 class="card-header">{{ article.titre }}</h3>
                <div class="card-body">
                    <h4 class="card-subtitle text-muted">
                        <p>Cat√©gories :
                            {% for categorie in article.categories %}
                                <span class="badge badge-pill badge-light">
                                {{ categorie.nom }}
                                </span>
                            {% endfor %}
                        </p>
                    </h4>
                </div>
                <div class="card-body">
                    <img src="{{ vich_uploader_asset(article, 'imageFile') }}" alt=""
                         style="max-width: 960px; max-height: 540px">
                </div>
                <div class="card-body">{{ article.contenu|raw }}</div>
                <div class="card-footer text-muted">
                    {{ article.createAt|date }}
                </div>
            </div>
        </div>
    </div>
    <div class="comments-container">
        <h1 class="text-white text-bold">Commentaires ({{ commentaires|length }})</h1>
        <ul>
            {% for commentaire in commentaires %}
                <li>
                    <div class="comment-main-level">
                        <!-- Avatar -->
                        {#                    <div class="comment-avatar"><img#}
                        {#                                src="http://i9.photobucket.com/albums/a88/creaticode/avatar_2_zps7de12f8b.jpg" alt="">#}
                        {#                    </div>#}
                        <!-- Contenedor del Comentario -->
                        <div class="comment-box">
                            <div class="comment-head">
                                <h6 class="comment-name">{#<a href="http://creaticode.com/blog">#}{{ commentaire.username }}</h6>
                                <span>{{ commentaire.createdAt|date }}</span>
                                {#                            <i class="fa fa-reply"></i>#}
                                {#                            <i class="fa fa-heart"></i>#}
                            </div>
                            <div class="comment-content">
                                {{ commentaire.contenu }}
                            </div>
                        </div>
                    </div>
                </li>
            {% else %}
                <li>
                    Pas de commentaires
                </li>
            {% endfor %}
        </ul>
        {% if app.user %}
            {{ form(formComment) }}
        {% else %}
            <div class="warning">
                Pour poster des commentaires connectez-vous
                <p><a href="{{ path('app_login') }}">Se connecter</a></p>
            </div>
        {% endif %}
    </div>
{% endblock %}